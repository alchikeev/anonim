from django.core.management.base import BaseCommand
from django.utils import translation
from core.models import EditablePage


class Command(BaseCommand):
    help = '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü'

    def handle(self, *args, **options):
        self.stdout.write(
            self.style.SUCCESS('üìÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü')
        )
        self.stdout.write('=' * 40)
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
        translation.activate('ru')
        self.init_pages_for_language('ru')
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–ª—è –∫—ã—Ä–≥—ã–∑—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
        translation.activate('ky')
        self.init_pages_for_language('ky')
        
        self.stdout.write(
            self.style.SUCCESS('‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!')
        )

    def init_pages_for_language(self, language_code):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞"""
        self.stdout.write(f'\nüåê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —è–∑—ã–∫–∞: {language_code}')
        
        # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
        self.create_or_update_page(
            'knowledge_base',
            '–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π' if language_code == 'ru' else '–ë–∏–ª–∏–º –±–∞–∑–∞—Å—ã',
            self.get_knowledge_base_content(language_code),
            language_code
        )
        
        # –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–ª—É–∂–±
        self.create_or_update_page(
            'service_contacts',
            '–ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–ª—É–∂–±' if language_code == 'ru' else '–ö—ã–∑–º–∞—Ç –±–∞–π–ª–∞–Ω—ã—à—Ç–∞—Ä—ã',
            self.get_service_contacts_content(language_code),
            language_code
        )
        
        # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
        self.create_or_update_page(
            'instructions',
            '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏' if language_code == 'ru' else '–ö”©—Ä—Å”©—Ç–º”©–ª”©—Ä',
            self.get_instructions_content(language_code),
            language_code
        )

    def create_or_update_page(self, page_key, title, content, language_code):
        """–°–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É"""
        page, created = EditablePage.objects.get_or_create(
            page=page_key,
            language=language_code,
            defaults={
                'title': title,
                'content': content
            }
        )
        
        if not created:
            page.title = title
            page.content = content
            page.save()
        
        status = '—Å–æ–∑–¥–∞–Ω–∞' if created else '–æ–±–Ω–æ–≤–ª–µ–Ω–∞'
        self.stdout.write(f'  ‚úÖ {title}: {status}')

    def get_knowledge_base_content(self, language_code):
        """–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π"""
        if language_code == 'ru':
            return '''
            <div class="row">
                <div class="col-md-6">
                    <h4>üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ —à–∫–æ–ª–µ</h4>
                    <ul>
                        <li>–ü—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤ —à–∫–æ–ª–µ</li>
                        <li>–ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å —Å–µ–±—è –æ—Ç –±—É–ª–ª–∏–Ω–≥–∞</li>
                        <li>–ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö</li>
                        <li>–ö—É–¥–∞ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∑–∞ –ø–æ–º–æ—â—å—é</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h4>üìö –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h4>
                    <ul>
                        <li>–°—Ç–∞—Ç—å–∏ –æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤</li>
                        <li>–ú–µ—Ç–æ–¥—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤</li>
                        <li>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∞–≤–∞—Ö –¥–µ—Ç–µ–π</li>
                        <li>–†–µ—Å—É—Ä—Å—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π</li>
                    </ul>
                </div>
            </div>
            '''
        else:
            return '''
            <div class="row">
                <div class="col-md-6">
                    <h4>üõ°Ô∏è –ú–µ–∫—Ç–µ–ø—Ç–µ–≥–∏ –∫–æ–æ–ø—Å—É–∑–¥—É–∫</h4>
                    <ul>
                        <li>–ú–µ–∫—Ç–µ–ø—Ç–µ –∂“Ø—Ä“Ø—à-—Ç—É—Ä—É—à —ç—Ä–µ–∂–µ–ª–µ—Ä–∏</li>
                        <li>–ë—É–ª–ª–∏–Ω–≥–¥–µ–Ω –∫–∞–Ω—Ç–∏–ø –∫–æ—Ä–≥–æ–Ω—É—É</li>
                        <li>–ö–∞–≥—ã–ª—ã—à—Ç–∞—Ä–¥–∞ —ç–º–Ω–µ –∫—ã–ª—É—É</li>
                        <li>–ñ–∞—Ä–¥–∞–º–≥–∞ –∫–∞–π–¥–∞ –∫–∞–π—Ä—ã–ª—É—É</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h4>üìö –ü–∞–π–¥–∞–ª—É—É –º–∞—Ç–µ—Ä–∏–∞–ª–¥–∞—Ä</h4>
                    <ul>
                        <li>”®—Å–ø“Ø—Ä“Ø–º–¥”©—Ä–¥“Ø–Ω –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è—Å—ã –∂”©–Ω“Ø–Ω–¥”© –º–∞–∫–∞–ª–∞–ª–∞—Ä</li>
                        <li>–ö–∞–≥—ã–ª—ã—à—Ç–∞—Ä–¥—ã —á–µ—á“Ø“Ø —ã–∫–º–∞–ª–∞—Ä—ã</li>
                        <li>–ë–∞–ª–¥–∞—Ä–¥—ã–Ω —É–∫—É–∫—Ç–∞—Ä—ã –∂”©–Ω“Ø–Ω–¥”© –º–∞–∞–ª—ã–º–∞—Ç</li>
                        <li>–ê—Ç–∞-—ç–Ω–µ–ª–µ—Ä “Ø—á“Ø–Ω —Ä–µ—Å—É—Ä—Å—Ç–∞—Ä</li>
                    </ul>
                </div>
            </div>
            '''

    def get_service_contacts_content(self, language_code):
        """–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å–ª—É–∂–±"""
        if language_code == 'ru':
            return '''
            <div class="row">
                <div class="col-md-6">
                    <h4>üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã</h4>
                    <ul>
                        <li><strong>–ü–æ–ª–∏—Ü–∏—è:</strong> 102</li>
                        <li><strong>–°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å:</strong> 103</li>
                        <li><strong>–ü–æ–∂–∞—Ä–Ω–∞—è —Å–ª—É–∂–±–∞:</strong> 101</li>
                        <li><strong>–ì–∞–∑–æ–≤–∞—è —Å–ª—É–∂–±–∞:</strong> 104</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h4>üë• –°–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h4>
                    <ul>
                        <li><strong>–î–µ—Ç—Å–∫–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è:</strong> 111</li>
                        <li><strong>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å:</strong> +996 312 123456</li>
                        <li><strong>–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–ª—É–∂–±–∞:</strong> +996 312 654321</li>
                        <li><strong>–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≥–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è:</strong> +996 312 789012</li>
                    </ul>
                </div>
            </div>
            '''
        else:
            return '''
            <div class="row">
                <div class="col-md-6">
                    <h4>üö® –¢–µ–∑ –∂–∞—Ä–¥–∞–º –∫—ã–∑–º–∞—Ç—Ç–∞—Ä—ã</h4>
                    <ul>
                        <li><strong>–ü–æ–ª–∏—Ü–∏—è:</strong> 102</li>
                        <li><strong>–¢–µ–∑ –∂–∞—Ä–¥–∞–º:</strong> 103</li>
                        <li><strong>”®—Ä—Ç –∫—ã–∑–º–∞—Ç—ã:</strong> 101</li>
                        <li><strong>–ì–∞–∑ –∫—ã–∑–º–∞—Ç—ã:</strong> 104</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h4>üë• –ö–æ–ª–¥–æ–æ –∫—ã–∑–º–∞—Ç—Ç–∞—Ä—ã</h4>
                    <ul>
                        <li><strong>–ë–∞–ª–¥–∞—Ä –∏—à–µ–Ω–∏–º —Ç–µ–ª–µ—Ñ–æ–Ω—É:</strong> 111</li>
                        <li><strong>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è–ª—ã–∫ –∂–∞—Ä–¥–∞–º:</strong> +996 312 123456</li>
                        <li><strong>–°–æ—Ü–∏–∞–ª–¥—ã–∫ –∫—ã–∑–º–∞—Ç:</strong> +996 312 654321</li>
                        <li><strong>–ë–∏–ª–∏–º –±–µ—Ä“Ø“Ø —ã—Å—ã–∫ —Å—ã–∑—ã–≥—ã:</strong> +996 312 789012</li>
                    </ul>
                </div>
            </div>
            '''

    def get_instructions_content(self, language_code):
        """–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π"""
        if language_code == 'ru':
            return '''
            <div class="row">
                <div class="col-md-12">
                    <h4>üìã –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h4>
                    <ol>
                        <li>–ù–∞–π–¥–∏—Ç–µ QR-–∫–æ–¥ –≤ –≤–∞—à–µ–π —à–∫–æ–ª–µ –∏–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ</li>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ —Å–ø–∏—Å–∫–∞</li>
                        <li>–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –ø–æ–¥—Ä–æ–±–Ω–æ</li>
                        <li>–£–∫–∞–∂–∏—Ç–µ, –Ω—É–∂–Ω–∞ –ª–∏ –≤–∞–º –ø–æ–º–æ—â—å</li>
                        <li>–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–ø–æ –∂–µ–ª–∞–Ω–∏—é)</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ"</li>
                    </ol>
                    
                    <h4>üîí –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å</h4>
                    <ul>
                        <li>–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω–æ</li>
                        <li>–ú—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º IP-–∞–¥—Ä–µ—Å–∞</li>
                        <li>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</li>
                        <li>–û—Ç–≤–µ—Ç –ø—Ä–∏–¥–µ—Ç —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—é —à–∫–æ–ª—ã</li>
                    </ul>
                </div>
            </div>
            '''
        else:
            return '''
            <div class="row">
                <div class="col-md-12">
                    <h4>üìã –ë–∏–ª–¥–∏—Ä“Ø“Ø –∂”©–Ω”©—Ç“Ø“Ø</h4>
                    <ol>
                        <li>–ú–µ–∫—Ç–µ–±–∏“£–∏–∑–¥–µ–≥–∏ QR-–∫–æ–¥–¥—É —Ç–∞–±—ã“£—ã–∑ –∂–µ —É–Ω–∏–∫–∞–ª–¥—É—É —à–∏–ª—Ç–µ–º–µ –∞—Ä–∫—ã–ª—É—É ”©—Ç“Ø“£“Ø–∑</li>
                        <li>–¢–∏–ø—Ç–∏ —Ç–∏–∑–º–µ–¥–µ–Ω —Ç–∞–Ω—Ç–∞“£—ã–∑</li>
                        <li>–ñ–∞–≥–¥–∞–π–¥—ã —Ç–æ–ª—É–∫ —Å“Ø—Ä”©—Ç—Ç”©“£“Ø–∑</li>
                        <li>–ñ–∞—Ä–¥–∞–º –∫–µ—Ä–µ–∫–ø–∏, –∫”©—Ä—Å”©—Ç“Ø“£“Ø–∑</li>
                        <li>–ë–∞–π–ª–∞–Ω—ã—à –º–∞–∞–ª—ã–º–∞—Ç—ã–Ω –∫–∞–ª—Ç—ã—Ä—ã“£—ã–∑ (–∫–∞–∞–ª–æ–æ –±–æ—é–Ω—á–∞)</li>
                        <li>"–ë–∏–ª–¥–∏—Ä“Ø“Ø –∂”©–Ω”©—Ç“Ø“Ø" –±–∞—Å–∫—ã—á—ã–Ω –±–∞—Å—ã“£—ã–∑</li>
                    </ol>
                    
                    <h4>üîí –ê–Ω–æ–Ω–∏–º–¥“Ø“Ø–ª“Ø–∫</h4>
                    <ul>
                        <li>–°–∏–∑–¥–∏–Ω –±–∏–ª–¥–∏—Ä“Ø“Ø“£“Ø–∑ —Ç–æ–ª—É–∫ –∞–Ω–æ–Ω–∏–º–¥“Ø“Ø</li>
                        <li>–ë–∏–∑ IP-–¥–∞—Ä–µ–∫—Ç–µ—Ä–¥–∏ —Å–∞–∫—Ç–∞–±–∞–π–±—ã–∑</li>
                        <li>–ë–∞–π–ª–∞–Ω—ã—à –º–∞–∞–ª—ã–º–∞—Ç—ã –º–∏–ª–¥–µ—Ç—Ç“Ø“Ø —ç–º–µ—Å</li>
                        <li>–ñ–æ–æ–ø –º–µ–∫—Ç–µ–ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è—Å—ã –∞—Ä–∫—ã–ª—É—É –∫–µ–ª–µ—Ç</li>
                    </ul>
                </div>
            </div>
            '''
